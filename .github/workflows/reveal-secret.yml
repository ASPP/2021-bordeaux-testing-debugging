name: Reveal a secret when the repository is tagged as something starting by secret

on:
  push

jobs:
  reveal-secret:
    runs-on: ubuntu-latest

    steps:
    - shell: bash
      env:
        SECRET_MSG: ${{ secrets.TOP_SECRET }}
      run: |
        echo "$SECRET_MSG"
        if [ "$SECRET_MSG" = 'do not tell anyone' ]; then
          echo matches
          echo "::debug::matches"
        fi
        echo "::debug::$SECRET_MSG"
    - name: Print secret
      run: |
        echo something
        echo "::set-output name=secret::$SECRET_MSG"
